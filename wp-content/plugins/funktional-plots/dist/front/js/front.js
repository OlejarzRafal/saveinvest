"use strict";function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,o,e){return o&&_defineProperties(t.prototype,o),e&&_defineProperties(t,e),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e){var n={};function l(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=n,l.d=function(t,o,e){l.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(o,t){if(1&t&&(o=l(o)),8&t)return o;if(4&t&&"object"==_typeof(o)&&o&&o.__esModule)return o;var e=Object.create(null);if(l.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var n in o)l.d(e,n,function(t){return o[t]}.bind(null,n));return e},l.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(o,"a",o),o},l.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},l.p="",l(l.s=0)}([function(t,o){var e=function(){function t(){_classCallCheck(this,t),window.funktionalPlots&&"object"==_typeof(window.funktionalPlots)?(this.mainMap=$("[data-plots-map]"),this.sectorsSelection=$("[data-plots-sectors]"),this.sectors=$("[data-plots-sector]"),this.sector=null,this.plots=null,this.plotSelected=null,this.plotInfoModal=$("[data-plots-info]"),this.initSectorsEvents(),this.setPlotsStatus()):console.error("funktionalPlots data not found!")}return _createClass(t,[{key:"initSectorsEvents",value:function(){var o=this;this.sectorsSelection.length?this.sectorsSelection.find("[data-plots-sector-selector]").click(this.handleSelectSector.bind(this)):(this.sector=$("[data-plots-sector]"),this.sector.show(),this.initPlotsEvent()),this.plotInfoModal.find("[data-plots-info-close]").click(function(t){t&&t.preventDefault(),o.hidePlotInfo(!0)}),this.plotInfoModal.find("[data-plots-info-next]").click(this.showNextPlotInfo.bind(this)),this.plotInfoModal.find("[data-plots-info-prev]").click(this.showPrevPlotInfo.bind(this)),this.mainMap.find("[data-plots-back-to-sectors]").click(this.handleBackToMainMap.bind(this))}},{key:"initPlotsEvent",value:function(){var n=this;this.plots?(this.plots.on("mouseover hover click",function(t){var o=$(t.target).is("[data-plots-plot]")?$(t.target):$(t.target).closest("[data-plots-plot]");if(o){var e=o.attr("data-plots-plot");"click"===t.type?n.showPlotInfo(e,!0):n.plotSelected||n.showPlotInfo(e,!1)}else console.error("Selected plot has wrong attribute! Event:",t)}),this.plots.on("mouseout blur",function(){n.plotSelected||n.hidePlotInfo()})):console.error("Plots paths not found!")}},{key:"setPlotsStatus",value:function(){var n=this;window.funktionalPlots.forEach(function(t){var o;if(t.sector&&t.sector.value){var e=$('[data-plots-sector="'.concat(t.sector.value,'"]'));e&&e.length?o=e.find('[data-plots-plot="'.concat(t.plotNr,'"]')):console.log("sector element for plot ".concat(t," not found!"))}else n.sector&&(o=$(n.sector).find('[data-plots-plot="'.concat(t.plotNr,'"]')));o&&o.length?o.addClass("plot-status--"+t.status.value):console.log("plot ".concat(t," element not found!"))})}},{key:"handleSelectSector",value:function(t){var o=$(t.currentTarget).attr("data-plots-sector-selector");o&&"string"==typeof o?(this.sector=$('[data-plots-sector="'.concat(o,'"]')),this.sector.length?(this.sectorsSelection.hide(),this.sector.show(),this.plots=this.sector.find("[data-plots-plot]"),this.initPlotsEvent()):console.error("Sector ".concat(o," was not found!"))):console.error("Selected ".concat(o," sector has wrong attribute!"))}},{key:"handleBackToMainMap",value:function(t){t&&t.preventDefault(),this.sector.hide(),this.sector=null,this.sectorsSelection.show()}},{key:"showPlotInfo",value:function(o,t){var e=window.funktionalPlots.find(function(t){return t.plotNr===o});e?(t&&(this.plotSelected=e),this.prepareInfoModalForPlot(e),this.plotInfoModal.show()):console[t?"error":"warn"]("Plot ".concat(o," data not found!"))}},{key:"showNextPlotInfo",value:function(t){t&&t.preventDefault(),this.showPlotInfo((parseInt(this.plotSelected.plotNr)+1).toString(),!0)}},{key:"showPrevPlotInfo",value:function(t){t&&t.preventDefault(),this.showPlotInfo((parseInt(this.plotSelected.plotNr)-1).toString(),!0)}},{key:"hidePlotInfo",value:function(t){if(t)this.plotSelected=null;else if(this.plotSelected)return;this.plotInfoModal.hide()}},{key:"prepareInfoModalForPlot",value:function(o){this.prepareInfoModalConditionalElementsForPlot(o),this.prepareInfoModalParamElementsForPlot(o),$("[data-plots-info-image]").attr("src",""),$("[data-plots-info-on-selected]")[this.plotSelected?"show":"hide"]();var t=window.funktionalPlots.find(function(t){return t.plotNr===(parseInt(o.plotNr)-1).toString()}),e=window.funktionalPlots.find(function(t){return t.plotNr===(parseInt(o.plotNr)+1).toString()});this.plotInfoModal.find("[data-plots-info-prev]")[t?"show":"hide"](),this.plotInfoModal.find("[data-plots-info-next]")[e?"show":"hide"]()}},{key:"prepareInfoModalConditionalElementsForPlot",value:function(n){var t=this.plotInfoModal.find("[data-plots-info-show-if]");t&&t.length&&(t.hide(),t.toArray().forEach(function(t){var o=$(t).attr("data-plots-info-show-if");if(o.includes("=")){if(o=o.split("="),n[o[0]]){var e=n[o[0]];"object"==_typeof(e)?e.value===o[1]&&$(t).show():e===o[1]&&$(t).show()}}else n[o]&&$(t).show()}))}},{key:"prepareInfoModalParamElementsForPlot",value:function(l){var t=this.plotInfoModal.find("[data-plots-info-param]");t&&t.length&&t.toArray().forEach(function(t){var o=$(t).attr("data-plots-info-param");if("none"!==$(t).closest("[data-plots-info-show-if]").css("display")){var e=function(t){return t?"object"==_typeof(t)?t.label:t:""};if(o.includes("|")){var n=o.split("|");$(t).text(n.map(function(t){return e(l[t])}).join(""))}else $(t).text(e(l[o]))}else $(t).text("")})}}]),t}();$(function(){$("[data-plots-map]").length&&new e})}]);
//# sourceMappingURL=front.js.map
